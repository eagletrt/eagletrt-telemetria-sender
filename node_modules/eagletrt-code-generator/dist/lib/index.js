"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var path = require("path");
var logger_1 = require("./utils/logger");
var options_1 = require("./utils/options");
var getCodes_1 = require("./utils/getCodes");
var transpile_1 = require("./utils/transpile");
var generators_1 = require("./generators");
/**
 * Fetches all the template files in the given folder (files whose extension is preceded
 * by .template) and generate the code inside the special comments (such as //{{COMMENT}})
 * @param src The folder where the template files will be fetched from. The default is the current folder.
 * @param structure The path to the json file containing the structure, used by generators to dynamically generate code. The default is structure.json.
 * @param options The options specifying things such as logging, indentation and filters on the files
 */
function generate(src, structure, options) {
    src = src || process.cwd();
    structure = structure || path.join(process.cwd(), 'structure.json');
    options = options_1.mergeOptions(options);
    var logger = new logger_1.Logger(options);
    var generators = generators_1.default(logger);
    var codes = getCodes_1.getCodes(structure, generators);
    transpile_1.transpile(src, codes, options, logger);
}
exports.generate = generate;
//# sourceMappingURL=index.js.map